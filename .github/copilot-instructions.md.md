## Gemini Added Memories

## 🤝 核心协作原则 (Core Collaboration Principles)

### 🤔 歧义澄清原则 (Clarification First)
- **核心思想**: 宁可多问一句，绝不猜错一步。
- **操作**: 如果您的任何请求存在歧义或不够具体，导致我无法制定出唯一的、清晰的执行计划，我**必须**暂停并向您提出具体的问题来澄清您的意图，而不是基于我的猜测去行动。

### 🚨 错误报告与修复原则 (Stop, Report & Fix)
- **核心思想**: 遇到红灯，立即停车。
- **操作**: 在执行任何操作（如运行测试、执行命令）时，一旦遇到错误，我必须：
    1.  **立即停止**后续所有步骤。
    2.  **完整报告**给您错误的日志和信息。
    3.  **分析**错误发生的原因。
    4.  向您提出一个明确的**修复建议或计划**。

### 🔒 安全第一原则 (Security First)
- **核心思想**: 安全是不可逾越的底线。
- **操作**: 我在读取或编写任何代码时，都会将安全放在首位。
    1.  我**绝不会**在代码中硬编码任何敏感信息（如 API 密钥、密码）。
    2.  如果我发现代码中存在已暴露的敏感信息，我会向您发出提醒。
    3.  我会优先使用框架（如 Laravel）提供的安全特性（如 ORM 防注入、CSRF 保护）。

---
## 📝 专项任务输出要求

### 📄 功能更新文档
- **触发条件**: 完成任何功能更新、重构或重要修复后。
- **操作**: 在 `docs/` 目录下创建一个新的 `.md` 文件，例如 `docs/feature-name.md`。
- **内容**: 文档需包含功能简介、主要变更点、以及（如果适用）使用方法或 API 端点。

### 📦 API Postman 集合
- **触发条件**: 创建或修改任何 API 接口时。
- **操作**: 生成一个 Postman v2.1.0 格式的 JSON 集合文件。
- **要求**: 集合中的每个请求都必须有清晰的 `description`，详细说明其用途、请求参数、头部信息和预期的响应示例。
- **存放位置**: `docs/api/` 目录下。

### 🌊 Mermaid 工作流程图
- **触发条件**: 当任务涉及复杂逻辑、多步骤流程或状态机时。
- **操作**: 创建一个 Mermaid 图来清晰地可视化这个工作流程。
- **内容**: 使用 Mermaid 语法（例如 `graph TD; A-->B;`）来绘制流程图、时序图或状态图。
- **存放位置**: 可以直接嵌入到功能文档中，或作为独立的 `.md` 文件存放在 `docs/workflows/` 目录下。

### 🧪 单元/功能测试 (Unit/Feature Tests)
- **触发条件**: 新增功能或修复 Bug 时。
- **操作**: 在 `tests/` 目录下创建或更新对应的测试用例。
- **要求**: 测试应覆盖核心逻辑，确保代码变更的正确性和稳定性。这可以防止未来的修改意外破坏现有功能。

### ⚙️ 更新配置模板 (Update Configuration Templates)
- **触发条件**: 当代码变更引入了新的环境变量时。
- **操作**: 必须同步更新项目中的 `.env.example` 文件。
- **要求**: 模板文件中需要为新变量添加注释，说明其用途和可选值。

### 📜 更新日志 (Changelog)
- **触发条件**: 在版本发布或一次重要的功能迭代完成后。
- **操作**: 更新项目根目录下的 `CHANGELOG.md` 文件。
- **要求**: 遵循 "Keep a Changelog" 格式，清晰地记录本次更新中的 `Added` (新增)、`Changed` (变更)、`Fixed` (修复)、`Removed` (移除) 等内容。

### 📊 项目全盘分析 (Full Project Analysis)
- **触发条件**: 当您发出指令如：“请对项目进行全盘分析” 或 “生成项目分析报告”。
- **操作**: 我将自动执行上述的后端和前端分析流程。
- **输出**: 在 `docs/` 目录下创建一份名为 `analysis.md` 的综合分析报告，内容包括但不限于后端 MVC 调用链、前端组件树和 API 依赖关系。

### 🔧 全局代码重构 (Global Code Refactoring)
- **触发条件**: 当您使用如“全局重构 [函数名]”或“请完整替换 [方法名] 并确保修改所有调用点”等指令时。
- **用户提供**: 您需要提供明确的重构目标（函数/方法/组件名）和期望的变更逻辑。
- **我的流程**:
    1.  **研究**: 全局搜索所有使用实例。
    2.  **计划**: 生成一份包含所有待修改文件和代码变更的详细计划，并向您确认。
    3.  **执行**: 获得您批准后，严格执行计划。
    4.  **验证**: 执行后，主动请求运行项目测试，确保代码的正确性。

### 🎨 代码风格与项目约定 (Code Style & Project Conventions)
- **核心思想**: 我写的任何代码，都应该看起来像是您亲自写的。
- **触发条件**: 在执行**任何**代码的创建或修改任务时。
- **操作**:
    1.  在动手前，我必须先阅读相关文件（或同一目录下的其他文件），以学习并模仿您项目的**代码风格**（如缩进、命名法）、**架构模式**（如服务层、仓库层的使用）和**编程习惯**。
    2.  我产出的所有代码都必须严格遵守这些约定。

### 🗃️ 数据库结构变更 (Database Schema Changes)
- **核心思想**: 任何数据库的变更都必须是可追溯、可回滚的。
- **触发条件**: 当功能需求涉及到数据库表的创建、修改或删除时。
- **操作**: 我**绝不能**直接修改数据库。我必须：
    1.  使用 `php artisan make:migration [migration_name]` 命令来创建一个新的迁移文件。
    2.  在该文件中定义好表的结构变更。
    3.  通知您运行 `php artisan migrate` 来应用变更。

### 📦 新增依赖管理 (Dependency Management)
- **核心思想**: 项目的依赖关系必须清晰明确。
- **触发条件**: 当我判断某个新功能需要引入一个新的第三方库（例如一个新的 Composer 包或 npm 模块）时。
- **操作**:
    1.  我必须先向您提出建议，并解释**为什么**需要这个新依赖。
    2.  在获得您的同意后，我会提供正确的命令（例如 `composer require vendor/package`），并请求您来执行它。

### 🏛️ 架构与代码组织 (Architecture & Code Organization)
- **核心思想**: 保持代码模块化和高内聚、低耦合。避免创建臃肿、万能的“上帝类”或文件。
- **触发条件**: 在添加新功能或进行代码重构时。
- **操作**:
    1.  对于不同类型的代码，我必须将其放置在约定俗成的、独立的目录中。例如：枚举 (`Enums`) 应放在 `app/Enums/`，服务 (`Services`) 应放在 `app/Services/`，接口 (`Interfaces`) 应放在 `app/Interfaces/` 等。
    2.  如果一个文件变得过于庞大（例如超过 300-500 行），我应主动向您提出拆分建议，将其职责分离到更小的类或文件中。
    3.  如果约定的目录不存在，我会请求您允许创建该目录，以保持项目结构的清晰。
